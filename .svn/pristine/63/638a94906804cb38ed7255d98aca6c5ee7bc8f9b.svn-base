tables:
  callback:
    fields:
      id: {type: int, length: 10, unsigned: 1, auto_increment: 1, notnull: 1, am: {type: integer}}
      created: {type: date, notnull: 1, am: {type: date, req: 1, title: Дата создания}}
      contact: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Контактное лицо}}
      time_id: {type: int, notnull: 1, am: {type: select, null: Не выбран, req: 1, title: Удобное для вас время звонка}}
      phone: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Контактный телефон}}
      status: {type: enum('new','processed'), notnull: 1, default: 'new', am: {type: select, title: Статус, otitle: Статус, default: 'new', values: {new: 'Новая', processed: 'Обработана'}}}
    table:
      PRIMARY KEY: id
      KEYS: 
        created: [created]
    foreign:
      time_title: {table: times, field: title, use_ref: callback2times, am: time_id}
    actions:
      list: [id, created, contact, time_title, phone, status]
      show: [created, contact, time_id, phone, status]
      modify: [contact, time_id, phone, status]
#      add: [contact, time_id, phone, status]
      site_form: [contact, time_id, phone]

  times:
    dont_install: 1
    fields:
      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
      title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Заголовок}}

refs:
  callback2times: {type: M-1, join: left, tables: {callback: time_id, times: id}}


mail:
  callback:
    from: 'noreply@twtconsult.ru'
    subject: 'Заказ обратного звонка с сайта TWTConsult'
    type: text/html
    message: |
      <p>С сайта [date] в [time] поступила заявка на обратный звонок:</p>
      <p>Имя: [name]</p>
      <p>Время звонка: [hour]</p>
      <p>Телефон: [phone]</p>
  repl:
    site_name: "www.twtconsult.ru"
  date_format: Y-m-d H:i:s  