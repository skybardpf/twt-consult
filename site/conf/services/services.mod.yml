tables:
  services:
    fields:
      id: {type: int, length: 10, unsigned: 1, auto_increment: 1, notnull: 1, am: {type: integer}}
      pos: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, htmltype: hidden}}
      title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Наименование}}
      icon: {type: tinytext, notnull: 0, am: {type: image, title: Иконка}}
      pid: {type: int, length: 10, default: 0, notnull: 1, am: {type: integer, req: 0, null: Нет родительского элемента, title: Категория, htmltype: select}}
      url: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: URL}}
      image: {type: tinytext, notnull: 0, am: {type: image, title: Изображение}}
      text: {type: text, notnull: 1, am: {type: ckhtml, htmltype: ckhtml, req: 1, title: Текст}}
      price: {type: longtext, am: {type: ckhtml, htmltype: ckhtml, title: Прайс}}
      active: {type: enum('yes','no'), default: 'yes', notnull: 1, am: {type: checkbox, title: Отображать на сайте, otitle: Отображать на сайте, default: 'yes', checked: 'yes', unchecked: 'no', values: {no: нет, yes: да}}}
    table:
      PRIMARY KEY: id
      KEYS:
        active: [active]
    foreign:
      pid_ttl: {table: services, field: title, use_ref: services2services, am: pid}
    actions:
      list: [id, pos, title, icon, pid_ttl, url, image, active]
      show: [pos, title, icon, pid, url, image, text, price, active]
      modify: [title, icon, pid, url, image, text, price, active]
      add: [title, icon, pid, url, image, text, price, active]
      site_service: [id, title, image, text, pid, price]
      site_services: [id, title, price]
      site_list: [id, pos, title, icon, pid, pid_ttl, url, image, price]
    images:
      icon:
        small: {w: 50, h: 50, ratio: 'equal', cut: 5}
        middle: {w: 90, h: 90, ratio: 'equal', cut: 5}

  additional:
    fields:
      id: {type: int, length: 10, unsigned: 1, auto_increment: 1, notnull: 1, am: {type: integer}}
      pos: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, htmltype: hidden}}
      title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Наименование}}
      active: {type: enum('yes','no'), default: 'yes', notnull: 1, am: {type: checkbox, title: Отображать на сайте, otitle: Отображать на сайте, default: 'yes', checked: 'yes', unchecked: 'no', values: {no: нет, yes: да}}}
    table:
      PRIMARY KEY: id
      KEYS:
        active: [active]
        pos: [pos]
    actions:
      list: [id, pos, title, active]
      show: all
      modify: [title, active]
      add: [title, active, pos]
refs:
  services2services: {type: M-1, self: [pid, id], join: LEFT, alias: service_title}


